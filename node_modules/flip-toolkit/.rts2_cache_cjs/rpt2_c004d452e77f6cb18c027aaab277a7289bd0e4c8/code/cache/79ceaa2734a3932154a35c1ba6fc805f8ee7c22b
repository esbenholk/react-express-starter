{"code":"// @ts-ignore\r\nimport onFrame from '../forked-rebound/onFrame';\r\nconst touchMove = 'touchmove';\r\nconst touchEnd = 'touchend';\r\nconst mouseMove = 'mousemove';\r\nconst mouseUp = 'mouseup';\r\nconst initialState = {\r\n    event: undefined,\r\n    target: undefined,\r\n    time: undefined,\r\n    xy: [0, 0],\r\n    delta: [0, 0],\r\n    initial: [0, 0],\r\n    previous: [0, 0],\r\n    local: [0, 0],\r\n    lastLocal: [0, 0],\r\n    velocity: 0,\r\n    distance: 0,\r\n    down: false,\r\n    first: true\r\n};\r\nconst defaultConfig = {\r\n    window,\r\n    touchOnly: false,\r\n    onDown: undefined,\r\n    onUp: undefined\r\n};\r\nfunction handlers(set, { onAction, config }) {\r\n    const handleUp = (event) => {\r\n        set(state => {\r\n            const newState = { ...state, down: false, first: false };\r\n            // @ts-ignore\r\n            if (onAction)\r\n                onAction(newState);\r\n            if (config.onUp)\r\n                config.onUp(newState);\r\n            return {\r\n                ...newState,\r\n                event,\r\n                // @ts-ignore\r\n                lastLocal: state.local\r\n            };\r\n        });\r\n    };\r\n    const handleDown = (event) => {\r\n        const { target, pageX, pageY } = event.touches ? event.touches[0] : event;\r\n        // @ts-ignore\r\n        set(state => {\r\n            const lastLocal = state.lastLocal || initialState.lastLocal;\r\n            const newState = {\r\n                ...initialState,\r\n                event,\r\n                target,\r\n                lastLocal,\r\n                local: lastLocal,\r\n                xy: [pageX, pageY],\r\n                initial: [pageX, pageY],\r\n                previous: [pageX, pageY],\r\n                down: true,\r\n                time: Date.now(),\r\n                cancel: () => {\r\n                    stop();\r\n                    // @ts-ignore\r\n                    onFrame(() => handleUp(event));\r\n                }\r\n            };\r\n            onAction(newState);\r\n            // @ts-ignore\r\n            if (config.onDown)\r\n                config.onDown(newState);\r\n            return { ...newState };\r\n        });\r\n    };\r\n    const handleMove = (event) => {\r\n        const { pageX, pageY } = event.touches ? event.touches[0] : event;\r\n        // @ts-ignore\r\n        set(state => {\r\n            const time = Date.now();\r\n            const x_dist = pageX - state.xy[0];\r\n            const y_dist = pageY - state.xy[1];\r\n            const delta_x = pageX - state.initial[0];\r\n            const delta_y = pageY - state.initial[1];\r\n            const distance = Math.sqrt(delta_x * delta_x + delta_y * delta_y);\r\n            const len = Math.sqrt(x_dist * x_dist + y_dist * y_dist);\r\n            const newState = {\r\n                ...state,\r\n                event,\r\n                time,\r\n                xy: [pageX, pageY],\r\n                delta: [delta_x, delta_y],\r\n                local: [\r\n                    state.lastLocal[0] + pageX - state.initial[0],\r\n                    state.lastLocal[1] + pageY - state.initial[1]\r\n                ],\r\n                velocity: len / (time - state.time),\r\n                distance: distance,\r\n                previous: state.xy,\r\n                first: false\r\n            };\r\n            onAction && onAction(newState);\r\n            return { ...newState };\r\n        });\r\n    };\r\n    const onDown = (event) => {\r\n        // it's a touch event with multiple fingers down but we only allow single finger swipes\r\n        // @ts-ignore\r\n        if (event.targetTouches && event.targetTouches.length > 1)\r\n            return;\r\n        if (config.maxWidth &&\r\n            !window.matchMedia(`screen and (max-width: ${config.maxWidth}px)`))\r\n            return;\r\n        if (!config.touchOnly) {\r\n            config.window.addEventListener(mouseMove, handleMove, { passive: true });\r\n            // @ts-ignore\r\n            config.window.addEventListener(mouseUp, onUp, { passive: true });\r\n        }\r\n        config.window.addEventListener(touchMove, handleMove, { passive: true });\r\n        // @ts-ignore\r\n        config.window.addEventListener(touchEnd, onUp, { passive: true });\r\n        handleDown(event);\r\n    };\r\n    const stop = () => {\r\n        if (!config.touchOnly) {\r\n            config.window.removeEventListener(mouseMove, handleMove, {\r\n                // @ts-ignore\r\n                passive: true\r\n            });\r\n            // @ts-ignore\r\n            config.window.removeEventListener(mouseUp, onUp, { passive: true });\r\n        }\r\n        config.window.removeEventListener(touchMove, handleMove, {\r\n            // @ts-ignore\r\n            passive: true\r\n        });\r\n        // @ts-ignores\r\n        config.window.removeEventListener(touchEnd, onUp, { passive: true });\r\n    };\r\n    const onUp = (e) => {\r\n        stop();\r\n        handleUp(e);\r\n    };\r\n    const output = {};\r\n    if (!config.touchOnly) {\r\n        output[`onMouseDown`] = onDown;\r\n    }\r\n    output[`onTouchStart`] = onDown;\r\n    return { handlers: output, set };\r\n}\r\nfunction gestureHandlers(props) {\r\n    let _state = initialState;\r\n    // @ts-ignore\r\n    const set = (cb) => (_state = cb(_state));\r\n    return handlers(set, {\r\n        onAction: props.onAction,\r\n        // passing in an object so that we can automatically get updated settings without\r\n        // rebinding the handlers\r\n        config: Object.assign(defaultConfig, props.config)\r\n    });\r\n}\r\nexport default gestureHandlers;\r\n//# sourceMappingURL=gestureHandlers.js.map","map":"{\"version\":3,\"file\":\"gestureHandlers.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Swipe/gestureHandlers.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/alexholachek/Desktop/dev/react-flip-toolkit/packages/flip-toolkit/Swipe/gestureHandlers.d.ts","writeByteOrderMark":false,"text":"import { OnAction, Config, Set, SwipeEventHandlers } from './types';\r\ninterface HandlerProps {\r\n    onAction: OnAction;\r\n    config: Config;\r\n}\r\ndeclare function gestureHandlers(props: HandlerProps): {\r\n    handlers: SwipeEventHandlers;\r\n    set: Set;\r\n};\r\nexport default gestureHandlers;\r\n"}}
